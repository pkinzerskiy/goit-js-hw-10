{"version":3,"file":"1-timer.js","sources":["../src/js/1-timer.js"],"sourcesContent":["\"use strict\"\n\nimport flatpickr from \"flatpickr\";\nimport \"flatpickr/dist/flatpickr.min.css\";\nimport { Ukrainian } from \"flatpickr/dist/l10n/uk.js\";\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nconst clickBtn = document.querySelector('button[data-start]');\nclickBtn.addEventListener(\"click\", startTimer);\nconst secondTeg = document.querySelector('span[data-seconds]');\nconst minuteTeg = document.querySelector('span[data-minutes]');\nconst hourTeg = document.querySelector('span[data-hours]');\nconst daysTeg = document.querySelector('span[data-days]');\n\nlet userSelectedDate = 0;\n\n\nflatpickr(\"#datetime-picker\", {\n    dateFormat: \"d.m.Y H:i:S\",\n    \"locale\": Ukrainian,\n    enableTime: true,\n    time_24hr: true,\n    defaultDate: new Date(),\n    minuteIncrement: 1,\n    onClose(selectedDates) {\n        userSelectedDate = (selectedDates[0].getTime());\n        setTime(userSelectedDate)\n    }\n}\n);\n\nclass ObjTime {\n    constructor() {\n        this.currentTime = Date.now(),\n            this.userSelectedDate = userSelectedDate,\n            this.idTimer,\n            this.range\n    }\n\n    rangeTime() {\n        \n        this.range = this.userSelectedDate - this.currentTime;\n\n        this.idTimer = setInterval(() => {\n                this.range -= 1000;\n            if (this.range <= 0) { \n                clearInterval(this.idTimer);\n                this.endTimer(this.idTimer);\n                return;\n            }\n            \n        console.log(this.range);\n        this.setTimeInForm(convertMs(this.range));\n        }, 1000)\n    }\n\n    setTimeInForm({ days, hours, minutes, seconds }) {\n        secondTeg.textContent = seconds;\n        minuteTeg.textContent = minutes;\n        hourTeg.textContent = hours;\n        daysTeg.textContent = days;\n        console.log(days, hours, minutes, seconds);\n    }\n\n    endTimer() {\n        clickBtn.disabled = false;\n        document.getElementById('datetime-picker').disabled = false;\n        console.log(\"stop interval\", this.idTimer);\n        // clearInterval(this.idTimer);\n        this.idTimer = '';\n        console.log(\"stop interval\", this.idTimer)\n        // return;\n    }\n}\n\nfunction setTime(userSelectedDate) {\n    let currentTime = Date.now();\n    if (userSelectedDate < currentTime) {\n        showMsg(\"Please choose a date in the future\", \"red\");\n        return;\n    }\n}\n\nfunction startTimer(event) {\n    event.preventDefault();\n    document.getElementById('datetime-picker').disabled = true;\n    clickBtn.disabled = true;\n\n    const htest = new ObjTime();   \n    htest.rangeTime();\n}\n\nfunction showMsg(msg, color) {\n    iziToast.show({\n                    message: msg,\n                    backgroundColor: color, \n                    messageColor: 'white',\n                    position:'topRight'\n    \n});\n}\n\nfunction convertMs(ms) {\n//   Number of milliseconds per unit of time\n  const second = 1000;\n  const minute = second * 60;\n  const hour = minute * 60;\n  const day = hour * 24;\n\n  // Remaining days\n  const days = pad(Math.floor(ms / day));\n  // Remaining hours\n  const hours = pad(Math.floor((ms % day) / hour));\n  // Remaining minutes\n  const minutes = pad(Math.floor(((ms % day) % hour) / minute));\n  // Remaining seconds\n  const seconds = pad(Math.floor((((ms % day) % hour) % minute) / second));\n\n  return { days, hours, minutes, seconds };\n}\n\n\nfunction pad(value) {\n        return String(value).padStart(2, \"0\");\n}\n\n"],"names":["clickBtn","startTimer","secondTeg","minuteTeg","hourTeg","daysTeg","userSelectedDate","flatpickr","Ukrainian","selectedDates","setTime","ObjTime","convertMs","days","hours","minutes","seconds","currentTime","showMsg","event","msg","color","iziToast","ms","pad","value"],"mappings":"uJAQA,MAAMA,EAAW,SAAS,cAAc,oBAAoB,EAC5DA,EAAS,iBAAiB,QAASC,CAAU,EAC7C,MAAMC,EAAY,SAAS,cAAc,oBAAoB,EACvDC,EAAY,SAAS,cAAc,oBAAoB,EACvDC,EAAU,SAAS,cAAc,kBAAkB,EACnDC,EAAU,SAAS,cAAc,iBAAiB,EAExD,IAAIC,EAAmB,EAGvBC,EAAU,mBAAoB,CAC1B,WAAY,cACZ,OAAUC,EAAS,UACnB,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACjB,QAAQC,EAAe,CACnBH,EAAoBG,EAAc,CAAC,EAAE,QAAS,EAC9CC,EAAQJ,CAAgB,CAC3B,CACL,CACA,EAEA,MAAMK,CAAQ,CACV,aAAc,CACV,KAAK,YAAc,KAAK,IAAK,EACzB,KAAK,iBAAmBL,EACxB,KAAK,QACL,KAAK,KACZ,CAED,WAAY,CAER,KAAK,MAAQ,KAAK,iBAAmB,KAAK,YAE1C,KAAK,QAAU,YAAY,IAAM,CAE7B,GADI,KAAK,OAAS,IACd,KAAK,OAAS,EAAG,CACjB,cAAc,KAAK,OAAO,EAC1B,KAAK,SAAS,KAAK,OAAO,EAC1B,MACH,CAEL,QAAQ,IAAI,KAAK,KAAK,EACtB,KAAK,cAAcM,EAAU,KAAK,KAAK,CAAC,CACvC,EAAE,GAAI,CACV,CAED,cAAc,CAAE,KAAAC,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,EAAI,CAC7Cd,EAAU,YAAcc,EACxBb,EAAU,YAAcY,EACxBX,EAAQ,YAAcU,EACtBT,EAAQ,YAAcQ,EACtB,QAAQ,IAAIA,EAAMC,EAAOC,EAASC,CAAO,CAC5C,CAED,UAAW,CACPhB,EAAS,SAAW,GACpB,SAAS,eAAe,iBAAiB,EAAE,SAAW,GACtD,QAAQ,IAAI,gBAAiB,KAAK,OAAO,EAEzC,KAAK,QAAU,GACf,QAAQ,IAAI,gBAAiB,KAAK,OAAO,CAE5C,CACL,CAEA,SAASU,EAAQJ,EAAkB,CAC/B,IAAIW,EAAc,KAAK,MACvB,GAAIX,EAAmBW,EAAa,CAChCC,EAAQ,qCAAsC,KAAK,EACnD,MACH,CACL,CAEA,SAASjB,EAAWkB,EAAO,CACvBA,EAAM,eAAc,EACpB,SAAS,eAAe,iBAAiB,EAAE,SAAW,GACtDnB,EAAS,SAAW,GAEN,IAAIW,IACZ,UAAS,CACnB,CAEA,SAASO,EAAQE,EAAKC,EAAO,CACzBC,EAAS,KAAK,CACE,QAASF,EACT,gBAAiBC,EACjB,aAAc,QACd,SAAS,UAE7B,CAAC,CACD,CAEA,SAAST,EAAUW,EAAI,CAQrB,MAAMV,EAAOW,EAAI,KAAK,MAAMD,EAAK,KAAG,CAAC,EAE/BT,EAAQU,EAAI,KAAK,MAAOD,EAAK,MAAO,IAAI,CAAC,EAEzCR,EAAUS,EAAI,KAAK,MAAQD,EAAK,MAAO,KAAQ,GAAM,CAAC,EAEtDP,EAAUQ,EAAI,KAAK,MAASD,EAAK,MAAO,KAAQ,IAAU,GAAM,CAAC,EAEvE,MAAO,CAAE,KAAAV,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,CACxC,CAGA,SAASQ,EAAIC,EAAO,CACZ,OAAO,OAAOA,CAAK,EAAE,SAAS,EAAG,GAAG,CAC5C"}